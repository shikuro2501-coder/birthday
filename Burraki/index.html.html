<!DOCTYPE html>
<html>
<head>
<title>Birthday Lily</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:#0f172a;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
canvas{
  background:#fdf2f8;
  border-radius:12px;
  max-width:95vw;
  max-height:95vh;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let bloom = 0;
let textAlpha = 0;
let textRise = 30;

// Base design size
const BASE = 600;

function resize(){
  const size = Math.min(window.innerWidth, window.innerHeight) * 0.95;
  canvas.width = size;
  canvas.height = size;
}
window.addEventListener("resize", resize);
resize();

function drawPetal(angle, openness){
  ctx.save();
  ctx.rotate(angle);

  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.bezierCurveTo(
    60*openness, -80,
    120*openness, -180,
    0, -260
  );
  ctx.bezierCurveTo(
    -120*openness, -180,
    -60*openness, -80,
    0, 0
  );

  const grad = ctx.createLinearGradient(0,0,0,-260);
  grad.addColorStop(0,"#ffb6c1");
  grad.addColorStop(1,"#ff5fa2");

  ctx.fillStyle = grad;
  ctx.fill();
  ctx.restore();
}

function drawCenter(){
  ctx.beginPath();
  ctx.arc(0,0,20,0,Math.PI*2);
  ctx.fillStyle="#ffd84d";
  ctx.fill();
}

function drawStamen(angle){
  ctx.save();
  ctx.rotate(angle);
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(0,-160);
  ctx.strokeStyle="#7a3b00";
  ctx.lineWidth=4;
  ctx.stroke();

  ctx.beginPath();
  ctx.arc(0,-160,7,0,Math.PI*2);
  ctx.fillStyle="#ffae00";
  ctx.fill();
  ctx.restore();
}

function drawStem(){
  const grad = ctx.createLinearGradient(0,0,0,250);
  grad.addColorStop(0,"#4ade80");
  grad.addColorStop(1,"#166534");

  ctx.beginPath();
  ctx.moveTo(0,20);
  ctx.bezierCurveTo(20,120,-20,220,0,350);
  ctx.strokeStyle=grad;
  ctx.lineWidth=14;
  ctx.stroke();
}

function drawLeaf(side){
  ctx.save();
  ctx.scale(side,1);

  const grad = ctx.createLinearGradient(0,0,150,0);
  grad.addColorStop(0,"#4ade80");
  grad.addColorStop(1,"#166534");

  ctx.beginPath();
  ctx.moveTo(0,150);
  ctx.bezierCurveTo(60,120,140,140,180,160);
  ctx.bezierCurveTo(140,180,60,200,0,170);
  ctx.closePath();
  ctx.fillStyle=grad;
  ctx.fill();
  ctx.restore();
}

function drawText(scale){
  if(textAlpha<=0) return;

  ctx.save();
  ctx.globalAlpha = textAlpha;
  ctx.fillStyle = "#db2777";
  ctx.font = `bold ${36*scale}px Georgia`;
  ctx.textAlign="center";
  ctx.fillText(
    "Happy Birthday Burraki-sama",
    canvas.width/2,
    canvas.height/2 + 290*scale - textRise*scale
  );
  ctx.restore();
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const scale = canvas.width / BASE;

  ctx.save();
  ctx.translate(canvas.width/2, canvas.height/2 - 80*scale);
  ctx.scale(scale, scale);

  if(bloom<1) bloom+=0.004;
  const openness = Math.sin(bloom*Math.PI/2);

  drawStem();
  drawLeaf(1);
  drawLeaf(-1);

  for(let i=0;i<6;i++){
    drawPetal(i*Math.PI/3, openness);
  }
  for(let i=0;i<6;i++){
    drawStamen(i*Math.PI/3);
  }
  drawCenter();

  ctx.restore();

  if(bloom>=1){
    if(textAlpha<1) textAlpha+=0.01;
    if(textRise>0) textRise-=0.4;
  }

  drawText(scale);
  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
